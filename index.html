<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>FlowStat</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div id="app" class="app">

      <div id="firebase-status" style="background:#eef2ff;padding:10px;margin:10px;border-radius:8px;font-size:14px;display:none;">
        Verificando Firebaseâ€¦
      </div>

      <section id="view-home" class="view active">
        <h1>FlowStat</h1>
        <button onclick="FS.router.go('partidos')">Partidos</button>
        <button onclick="FS.router.go('equipos')">Equipos</button>
        <button onclick="FS.router.go('jugadoras')">Jugadoras</button>
        <button id="debug-open-modal">DEBUG abrir modal</button>
      </section>

      <!-- resto de vistas (partidos, equipos, jugadoras, etc.) -->
      <section id="view-partidos" class="view hidden">
        <h2>Partidos</h2>
        <button onclick="FS.partidos.create()">âž• Nuevo partido</button>
        <div id="lista-partidos"></div>
        <button onclick="FS.router.go('home')">ðŸ”™ Volver</button>
      </section>

      <section id="view-equipos" class="view hidden">
        <h2>Equipos</h2>
        <button onclick="FS.equipos.create()">âž• Crear equipo</button>
        <div id="lista-equipos"></div>
        <button onclick="FS.router.go('home')">ðŸ”™ Volver</button>
      </section>

      <section id="view-jugadoras" class="view hidden">
        <h2>Jugadoras</h2>
        <button onclick="FS.jugadoras.create()">âž• Crear jugadora</button>
        <div id="lista-jugadoras"></div>
        <button onclick="FS.router.go('home')">ðŸ”™ Volver</button>
      </section>

      <section id="view-set" class="view hidden">
        <h2 id="titulo-set">Set</h2>
        <div class="top-row">
          <div class="players" id="players-container"></div>
          <button id="btn-change" class="action-btn">Cambiar</button>
          <button id="btn-finish" class="action-btn">Finalizar set</button>
          <div id="undo-container"></div>
        </div>
        <div class="groups" id="groups-container"></div>
        <button onclick="FS.router.go('partidos')">ðŸ”™ Volver</button>
      </section>

      <!-- modal dentro de #app -->
      <div id="modal-bg" class="hidden modal-bg">
        <div id="modal-content" class="modal-content"></div>
      </div>

    </div> <!-- FIN DE #APP -->

    <!-- Firebase SDK (compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>

    <!-- firebase-init se carga COMO SCRIPT NO-MODULE -->
    <script src="firebase-init.js"></script>

    <!-- Core -->
    <script src="state.js"></script>
    <script src="storage.js"></script>

    <!-- Router + Modal + UI -->
    <script src="router.js"></script>
    <script src="modal.js"></script>
    <script src="ui_partidos.js"></script>
    <script src="ui_equipos.js"></script>
    <script src="ui_jugadoras.js"></script>
    <script src="ui_set.js"></script>

    <!-- bootstrap -->
    <script src="app.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function(){
        const dbg = document.getElementById("debug-open-modal");
        if (dbg) dbg.addEventListener("click", function(){
          FS.modal.open('<h3>Debug modal</h3><p>Si ves esto significa que modal.open ejecutÃ³ y #modal-bg es visible.</p><button onclick="FS.modal.close()">Cerrar</button>');
        });
      });
    </script>

  </body>
</html>
